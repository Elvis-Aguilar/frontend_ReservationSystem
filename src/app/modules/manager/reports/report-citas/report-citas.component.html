<main>
    <div class="header">
        <h2>Reporte de General de Citas</h2>
        <button class="text-sm py-2 px-2 bg-purple-600 text-white rounded hover:bg-purple-700"
            (click)="realizarReport()">Realizar Reporte</button>

        @if (appointmenReports.length > 0) {
        <button class="text-sm py-2 px-2 bg-blue-600 text-white rounded hover:bg-blue-700"
            (click)="exportPDf()">Exportar PDF</button>
        <button class="text-sm py-2 px-2 bg-green-600 text-white rounded hover:bg-green-700"
            (click)="exportExcel()">Exportar Excel</button>
        <button class="text-sm py-2 px-2 bg-slate-500 text-white rounded hover:bg-slate-700"
            (click)="exportPNG()">Exportar PNG</button>
        } 
    </div>

    <div class="filter-bar">

        <div class="filter-group">
            <label for="filter-type">Filtrar por:</label>
            <select id="filter-type" name="filter-type" [(ngModel)]="selectedFilter">
                <option value="all">TODOS</option>
                <option value="completed">COMPLETADOS</option>
                <option value="recerved">RECERVADOS</option>
                <option value="canceled">CANCELADOS</option>
            </select>
        </div>

        <div class="filter-group">
            <label for="start-date">Fecha de inicio:</label>
            <input id="start-date" type="date" name="start-date" [(ngModel)]="startDate">
        </div>

        <div class="filter-group">
            <label for="end-date">Fecha final:</label>
            <input id="end-date" type="date" name="end-date" [(ngModel)]="endDate">
        </div>
    </div>
    <div class="table-container">
        <table>
            <thead>
                <tr>
                    <th>#</th>
                    <th>Cliente</th>
                    <th>Servicio</th>
                    <th>Fecha</th>
                    <th>Hora</th>
                    <th>Empleado</th>
                    <th>Precio Q</th>
                </tr>
            </thead>
            <tbody>
                @for (item of appointmenReports; track $index) {
                <tr>
                    <td>{{$index+1}}</td>
                    <td>{{item.cliente}}</td>
                    <td>{{item.servicio}}</td>
                    <td>{{item.fecha}}</td>
                    <td>{{item.horaInicio}}</td>
                    <td>{{item.empleado}}</td>
                    <td>{{item.price}}</td>
                </tr>
                }
                <tr>
                    <td colspan="6"><strong>Total :</strong></td>
                    <td><strong>{{totol}}</strong></td>
                </tr>
            </tbody>
        </table>
    </div>
</main>